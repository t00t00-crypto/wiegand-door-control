# 基于 Wiegand 协议的门禁控制系统

## 注意

1. 本项目基于 Wiegand 协议的 34bits 版本制作，非标准的 26bits 版本。
2. 大部分代码借鉴于 https://github.com/Senorsen/door-access-control
3. 把 control 部分与 data 部分合并，统称为 control 。

## 前言

1. 本项目所使用的协议视图

   |  0   |  1   |  2   |  3   | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   | 12   | 13   | 14   | 15   | 16   | 17   | 18   | 19   | 20   | 21   | 22   | 23   | 24   | 25   | 26   | 27   |  28  |
   | :--: | :--: | :--: | :--: | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | :--: |
   |  1   |  7E  |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |
   |  2   |  00  |  00  |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |
   |  3   |  00  |  00  |  00  | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   | 00   |  00  |
   |  4   |  00  |  00  |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |
   |  5   |  0D  |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |

   1. 1 行为标志开始
   2. 2 行为 control 行
   3. 3 行为 data 行
   4. 4 行为校验行
   5. 5 行为标志结束

   * 注意：代码中把 control 与 data 合并！

2. 使用方法

   ```
   ./mac
   或
   ./linux
   或
   ./win32
   或
   ./win64
   ```

3. 功能列表

   - 开门
   - 时间同步
   - 获取日志条数
   - 警报复位
   - 设置门的状态（常开 / 常闭 / 默认）
   - 清空日志
   - 获取卡号
   - 批量获取卡号
   - 添加权限
   - 清除权限
   - 一键清空权限
   - 持续检查门的状态
   - （隐藏）门禁状态显示

## 进阶

1. 程序概念图

   ![程序概念图](https://i.loli.net/2020/08/22/uHPg52ISMAFOYw8.png)

2. 使用了 Go 自带的并行处理程序，同步处理返回结果，可以减少等待时间。

3. 全平台支持

## 后记

1. `status` 门禁状态显示模块还没有确定，如果想要尝试可以取消代码内的注释。
2. 有任何 BUG 欢迎提交 Pull Requests，提交 ISSUE 随缘修复。。。